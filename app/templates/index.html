<!DOCTYPE html>
<html lang="ar" dir="rtl" role="document">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="description" content="PneumoDetect - Ù†Ø¸Ø§Ù… Ø°ÙƒÙŠ Ù„ÙƒØ´Ù Ø§Ù„ØªÙ‡Ø§Ø¨ Ø§Ù„Ø±Ø¦Ø© Ù…Ù† Ø§Ù„Ø£Ø´Ø¹Ø§Øª Ø§Ù„Ø³ÙŠÙ†ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ">
    <title data-i18n="page_title">PneumoDetect - ÙƒØ´Ù Ø°ÙƒÙŠ Ù„Ù„Ø§Ù„ØªÙ‡Ø§Ø¨ Ø§Ù„Ø±Ø¦ÙˆÙŠ</title>
    
    <!-- External Resources -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- CSS Unified System -->
    <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">
    
    <style>
        /* --- Light Mode Variables --- */
        :root {
            --primary-color: #028876;
            --primary-hover: #046d5f;
            --tech-accent-color: #4361ee;
            --tech-accent-hover: #3a0ca3;
            --secondary-color: #149cea;
            --light-color: #f8fafb;
            --light-section-bg: #f1f5f9;
            --dark-color: #2d3748;
            --white-color: #ffffff;
            --gray-color: #718096;
            --border-radius: 12px;
            --box-shadow: 0 10px 25px rgba(0, 0, 0, 0.07);
            --transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            --hero-bg-fallback: #028876;
        }

        /* --- Dark Mode Variables --- */
        [data-theme="dark"] {
            --primary-color: #06a596;
            --primary-hover: #008c8c;
            --tech-accent-color: #5a7fff;
            --tech-accent-hover: #4361ee;
            --secondary-color: #149cea;
            --light-color: #1a202c;
            --light-section-bg: #2d3748;
            --dark-color: #f7fafc;
            --white-color: #2d3748;
            --gray-color: #cbd5e0;
            --box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            --hero-bg-fallback: #046d5f;
        }

        [dir="ltr"] { font-family: 'Inter', sans-serif; }
        [dir="rtl"] { font-family: 'Tajawal', sans-serif; }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--light-color);
            color: var(--dark-color);
            line-height: 1.7;
            transition: var(--transition);
        }

        .container { width: 100%; max-width: 1200px; margin: 0 auto; padding: 0 20px; }

        /* --- Accessibility & Focus States --- */
        a, button, input, [tabindex="0"] {
            outline: 2px solid transparent;
            outline-offset: 2px;
        }
        a:focus-visible, button:focus-visible, input:focus-visible, [tabindex="0"]:focus-visible {
            outline-color: var(--tech-accent-color);
            outline-offset: 3px;
        }

        /* --- Header --- */
        header {
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 0;
            z-index: 1000;
            transition: var(--transition);
        }

        [data-theme="dark"] header {
            background-color: rgba(45, 55, 72, 0.95);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 30px;
        }

        .branding {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .branding i { font-size: 2rem; }

        .main-nav { display: flex; gap: 30px; }

        .nav-link {
            color: var(--dark-color);
            text-decoration: none;
            font-weight: 500;
            padding: 10px 20px;
            border-radius: 50px;
            transition: var(--transition);
        }

        .nav-link:hover, .nav-link.active {
            color: var(--white-color);
            background-color: var(--primary-color);
        }
        
        .header-actions { display: flex; align-items: center; gap: 20px; }

        /* --- Theme Toggle --- */
        .theme-toggle {
            background: none;
            border: none;
            color: var(--dark-color);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: var(--transition);
        }
        .theme-toggle:hover {
            background-color: rgba(0, 0, 0, 0.1);
        }
        [data-theme="dark"] .theme-toggle:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        /* Language Toggle */
        .lang-toggle {
            position: relative;
            background-color: #e2e8f0;
            border-radius: 50px;
            padding: 4px;
            display: flex;
        }

        [data-theme="dark"] .lang-toggle {
            background-color: #4a5568;
        }

        .lang-toggle button {
            background: none;
            border: none;
            padding: 8px 16px;
            cursor: pointer;
            font-weight: 600;
            color: var(--gray-color);
            border-radius: 50px;
            transition: color 0.3s;
            z-index: 2;
            position: relative;
        }

        .lang-toggle button.active { color: var(--white-color); }

        .lang-toggle .indicator {
            position: absolute;
            top: 4px;
            height: calc(100% - 8px);
            background-color: var(--primary-color);
            border-radius: 50px;
            transition: var(--transition);
            z-index: 1;
        }

        [dir="rtl"] .lang-toggle .indicator { right: 4px; width: calc(50% - 4px); }
        [dir="rtl"] .lang-toggle button[data-lang="en"].active ~ .indicator { transform: translateX(-100%); }
        [dir="ltr"] .lang-toggle .indicator { left: 4px; width: calc(50% - 4px); }
        [dir="ltr"] .lang-toggle button[data-lang="ar"].active ~ .indicator { transform: translateX(100%); }

        /* --- Buttons with Micro-interactions --- */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 12px 28px;
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .btn::before { /* Micro-interaction: ripple effect */
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        .btn:active::before {
            width: 300px;
            height: 300px;
        }

        .btn i { transition: transform 0.3s; }
        .btn:hover i { transform: scale(1.1); }

        .btn-primary {
            background-color: var(--tech-accent-color);
            color: var(--white-color);
        }

        .btn-primary:hover {
            background-color: var(--tech-accent-hover);
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(67, 97, 238, 0.4);
        }

        .btn-secondary {
            background-color: var(--white-color);
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .btn-secondary:hover {
            background-color: var(--primary-color);
            color: var(--white-color);
            transform: translateY(-3px);
        }

        .btn-outline {
            background-color: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            box-shadow: none;
        }

        .btn-outline:hover {
            background-color: var(--primary-color);
            color: var(--white-color);
        }

        .btn-large { padding: 16px 36px; font-size: 1.15rem; }

        /* --- Hero Section with Lazy Loading and Improved Contrast --- */
        .hero-section {
            background-color: var(--hero-bg-fallback); /* Fallback color */
            color: var(--white-color);
            padding: 120px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        /* Lazy loading background image */
        .hero-section.lazy-bg {
            background: linear-gradient(135deg, rgba(0, 122, 122, 0.8), rgba(0, 92, 92, 0.9)), 
                        url('https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?q=80&w=2070') center/cover;
        }

        .hero-content {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.3); /* Improved contrast overlay */
            backdrop-filter: blur(15px);
            border-radius: var(--border-radius);
            padding: 50px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .hero-title { font-size: 2.8rem; margin-bottom: 25px; font-weight: 700; }
        .hero-subtitle { font-size: 1.25rem; margin-bottom: 40px; opacity: 0.95; }
        .cta-buttons { display: flex; justify-content: center; gap: 25px; flex-wrap: wrap; }

        /* --- Features Section with Visual Separation --- */
        .features-section { padding: 100px 0; background-color: var(--light-section-bg); }
        .section-title { text-align: center; font-size: 2.2rem; margin-bottom: 60px; color: var(--dark-color); font-weight: 700; }
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 40px; }

        .feature-card {
            background-color: var(--white-color);
            border-radius: var(--border-radius);
            padding: 40px;
            box-shadow: var(--box-shadow);
            text-align: center;
            transition: var(--transition);
            border-top: 5px solid transparent;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border-top-color: var(--primary-color);
        }
        .feature-card:hover .feature-icon { /* Micro-interaction */
            transform: scale(1.1);
            background-color: var(--primary-color);
            color: var(--white-color);
        }

        .feature-icon {
            width: 80px;
            height: 80px;
            background-color: rgba(0, 122, 122, 0.1);
            color: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            font-size: 2rem;
            transition: var(--transition);
        }

        /* --- Analysis Section with Enhanced File Interaction --- */
        .analysis-section { padding: 100px 0; background-color: var(--white-color); }
        .section-subtitle { text-align: center; max-width: 700px; margin: 0 auto 50px; color: var(--gray-color); font-size: 1.1rem; }
        .upload-container { max-width: 650px; margin: 0 auto; }

        .file-upload-area {
            border: 3px dashed #cbd5e0;
            border-radius: var(--border-radius);
            padding: 60px 40px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            background-color: #f7fafc;
            position: relative;
        }

        .file-upload-area:hover, .file-upload-area.drag-over {
            border-color: var(--tech-accent-color);
            background-color: rgba(67, 97, 238, 0.05);
            transform: scale(1.02);
        }

        .file-upload-area i { font-size: 4rem; color: var(--gray-color); margin-bottom: 25px; transition: var(--transition); }
        .file-upload-area:hover i { color: var(--tech-accent-color); }

        /* --- Enhanced Loading State with Progress --- */
        .loading-state { text-align: center; padding: 40px; display: none; }
        .ai-scanner {
            width: 120px;
            height: 120px;
            margin: 0 auto 20px;
            position: relative;
            border-radius: 50%;
            background: conic-gradient(from 0deg, transparent, var(--tech-accent-color), transparent 30%);
            animation: rotate 2s linear infinite;
            box-shadow: 0 0 40px rgba(67, 97, 238, 0.5); /* Pulse effect */
        }
        .ai-scanner::before {
            content: '';
            position: absolute;
            inset: 5px;
            border-radius: 50%;
            background-color: var(--white-color);
        }
        .ai-scanner::after {
            content: 'ğŸ§ ';
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
        }
        @keyframes rotate { 100% { transform: rotate(360deg); } }

        .progress-container {
            width: 100%;
            max-width: 300px;
            margin: 20px auto 0;
            background-color: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }
        .progress-bar {
            height: 10px;
            width: 0;
            background: linear-gradient(90deg, var(--tech-accent-color), #7209b7);
            transition: width 0.3s ease;
        }
        .progress-text { margin-top: 10px; font-weight: 600; color: var(--gray-color); }

        /* --- Tech Result Visualization --- */
        .result-container { margin-top: 40px; }
        .result-card { background-color: var(--white-color); border-radius: var(--border-radius); padding: 30px; box-shadow: var(--box-shadow); }
        .confidence-bar {
            height: 24px;
            background-color: #e0e0e0;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }
        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--tech-accent-color), #7209b7);
            transition: width 1.5s ease-out;
            position: relative;
            overflow: hidden;
        }
        .confidence-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }
        @keyframes shimmer { 100% { transform: translateX(100%); } }
        .confidence-text { text-align: center; margin-top: 10px; font-weight: 600; font-size: 1.1rem; }

        /* --- Custom Notification System --- */
        .notification-container {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .notification {
            background-color: var(--white-color);
            color: var(--dark-color);
            padding: 16px 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            display: flex;
            align-items: center;
            gap: 15px;
            min-width: 300px;
            border-right: 5px solid var(--tech-accent-color);
            animation: slideIn 0.3s ease-out;
            transition: opacity 0.3s, transform 0.3s;
        }
        .notification.error { border-right-color: var(--danger-color); }
        .notification.success { border-right-color: var(--success-color); }
        .notification i { font-size: 1.5rem; }
        .notification.error i { color: var(--danger-color); }
        .notification.success i { color: var(--success-color); }
        .notification-content { flex-grow: 1; }
        .notification-title { font-weight: 700; margin-bottom: 4px; }
        .notification-message { font-size: 0.9rem; color: var(--gray-color); }
        .notification-close { cursor: pointer; color: var(--gray-color); }
        @keyframes slideIn { from { transform: translateX(-120%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        /* --- Tooltip System with Keyboard Support --- */
        .tooltip-wrapper {
            position: relative;
            display: inline-block;
            border-bottom: 1px dashed var(--gray-color);
            cursor: help;
        }
        .tooltip {
            visibility: hidden;
            width: 220px;
            background-color: var(--dark-color);
            color: var(--white-color);
            text-align: center;
            border-radius: 6px;
            padding: 8px 12px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9rem;
        }
        .tooltip::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--dark-color) transparent transparent transparent;
        }
        .tooltip-wrapper:hover .tooltip, .tooltip-wrapper:focus .tooltip { 
            visibility: visible; 
            opacity: 1; 
        }

        /* --- Footer --- */
        footer { background-color: var(--dark-color); color: var(--light-color); padding: 50px 0; text-align: center; }
        
        /* --- Responsive Design --- */
        @media (max-width: 992px) {
            .header-container { flex-direction: column; gap: 25px; }
            .main-nav { order: 3; width: 100%; justify-content: center; }
            .hero-title { font-size: 2.2rem; }
            .cta-buttons { flex-direction: column; align-items: center; }
            .cta-buttons .btn { width: 280px; }
        }
        @media (max-width: 768px) {
            .hero-section { padding: 80px 0; }
            .hero-content { padding: 30px; }
            .hero-title { font-size: 1.9rem; }
            .features-section, .analysis-section { padding: 80px 0; }
        }
        @media (max-width: 576px) {
            .header-container { padding: 15px; }
            .branding { font-size: 1.3rem; }
            .main-nav { flex-wrap: wrap; gap: 10px; }
            .nav-link { padding: 8px 15px; font-size: 0.9rem; }
            .hero-section { padding: 60px 0; }
            .hero-title { font-size: 1.6rem; }
            .features-grid { grid-template-columns: 1fr; }
            .notification-container { left: 10px; right: 10px; }
            .notification { min-width: auto; }
        }
    </style>
</head>
<body role="application">
    <a href="#main-content" class="skip-to-main" aria-label="Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ" style="position:absolute; top:-40px; left:0; background:var(--tech-accent-color); color:white; padding:8px; z-index:100; transition:top 0.3s;">Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</a>

    <!-- Notification Container -->
    <div class="notification-container" id="notification-container"></div>

    <header role="banner">
        <div class="header-container">
            <div class="branding">
                <i class="fas fa-lungs" aria-hidden="true"></i>
                <h1>PneumoDetect</h1>
            </div>
            <nav class="main-nav" role="navigation" aria-label="Ø§Ù„Ù…Ù„Ø§Ø­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©">
                <a href="#home" class="nav-link active" data-i18n="nav_home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                <a href="#analysis" class="nav-link" data-i18n="nav_analysis">Ø§Ù„ØªØ­Ù„ÙŠÙ„</a>
            </nav>
            <div class="header-actions">
                <!-- Theme Toggle -->
                <button class="theme-toggle" id="theme-toggle" aria-label="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ">
                    <i class="fas fa-moon" id="theme-icon"></i>
                </button>
                <!-- Language Toggle -->
                <div class="lang-toggle" role="group" aria-label="ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©">
                    <button onclick="setLanguage('ar')" data-lang="ar" class="active" aria-pressed="true">AR</button>
                    <button onclick="setLanguage('en')" data-lang="en" aria-pressed="false">EN</button>
                    <div class="indicator"></div>
                </div>
                <a href="login.html" class="btn btn-outline"><i class="fas fa-sign-in-alt"></i> <span data-i18n="nav_login">Ø¯Ø®ÙˆÙ„</span></a>
            </div>
        </div>
    </header>

    <main id="main-content" role="main">
        <section id="home-section" class="hero-section" data-bg="https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?q=80&w=2070">
            <div class="hero-content">
                <h1 class="hero-title" data-i18n="home_title">ğŸ¯ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ PneumoDetect</h1>
                <p class="hero-subtitle" data-i18n="home_description">
                    Ù…Ù†ØµØ© Ù…ØªÙ‚Ø¯Ù…Ø© Ù„ØªØ­Ù„ÙŠÙ„ ØµÙˆØ± Ø§Ù„Ø£Ø´Ø¹Ø© Ø§Ù„Ø³ÙŠÙ†ÙŠØ© Ù„Ù„ØµØ¯Ø± Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¨Ø¯Ù‚Ø© ÙˆÙ…ÙˆØ«ÙˆÙ‚ÙŠØ© Ø¹Ø§Ù„ÙŠØ©.
                </p>
                <div class="cta-buttons">
                    <a href="#analysis" class="btn btn-primary btn-large">
                        <i class="fas fa-microscope"></i>
                        <span data-i18n="home_cta_analyze">Ø§Ø¨Ø¯Ø£ ØªØ­Ù„ÙŠÙ„Ø§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹</span>
                    </a>
                    <a href="register.html" class="btn btn-secondary btn-large">
                        <i class="fas fa-user-plus"></i>
                        <span data-i18n="home_cta_register">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</span>
                    </a>
                </div>
            </div>
        </section>

        <section class="features-section">
            <div class="container">
                <h2 class="section-title" data-i18n="features_title">Ù„Ù…Ø§Ø°Ø§ ØªØ®ØªØ§Ø± PneumoDetectØŸ</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon"><i class="fas fa-bolt"></i></div>
                        <h3 data-i18n="home_card1_title">âš¡ ØªØ­Ù„ÙŠÙ„ ÙÙˆØ±ÙŠ</h3>
                        <p data-i18n="home_card1_desc">Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬ ØªØ­Ù„ÙŠÙ„ ØµÙˆØ± Ø§Ù„Ø£Ø´Ø¹Ø© Ø§Ù„Ø³ÙŠÙ†ÙŠØ© ÙÙŠ Ø«ÙˆØ§Ù†Ù Ù…Ø¹Ø¯ÙˆØ¯Ø© Ø¨Ø¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon"><i class="fas fa-user-md"></i></div>
                        <h3 data-i18n="home_card2_title">âœ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ù…ØªØ®ØµØµØ©</h3>
                        <p data-i18n="home_card2_desc">ÙŠÙ…ÙƒÙ† Ù„Ù„Ø£Ø·Ø¨Ø§Ø¡ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØ¥Ø¶Ø§ÙØ© Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙ‡Ù… Ø§Ù„Ø·Ø¨ÙŠØ© Ù„Ø¶Ù…Ø§Ù† ØªØ´Ø®ÙŠØµ Ø¯Ù‚ÙŠÙ‚.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon"><i class="fas fa-shield-alt"></i></div>
                        <h3 data-i18n="home_card3_title">ğŸ”’ Ø£Ù…Ø§Ù† Ø¹Ø§Ù„ÙŠ</h3>
                        <p data-i18n="home_card3_desc">Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø·Ø¨ÙŠØ© Ù…Ø­Ù…ÙŠØ© Ø¨Ø£Ø¹Ù„Ù‰ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„ØªØ´ÙÙŠØ±.</p>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="analysis-section" class="analysis-section" role="region" aria-labelledby="analysis-title">
            <div class="container">
                <h2 id="analysis-title" class="section-title" data-i18n="analysis_title">ğŸ”¬ ØªØ­Ù„ÙŠÙ„ ØµÙˆØ±Ø© Ø§Ù„Ø£Ø´Ø¹Ø© Ø§Ù„Ø³ÙŠÙ†ÙŠØ©</h2>
                <p class="section-subtitle" data-i18n="analysis_description">Ø§Ø®ØªØ± ØµÙˆØ±Ø© Ø¨ØµÙŠØºØ© JPG Ø£Ùˆ PNG Ù„Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙÙˆØ±ÙŠ.</p>
                
                <div class="upload-container">
                    <div class="file-upload-area" id="file-upload-area" tabindex="0" role="button" aria-label="Ù…Ù†Ø·Ù‚Ø© Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª">
                        <input type="file" id="imageInput" accept="image/png,image/jpeg" style="display: none;" aria-label="Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø£Ø´Ø¹Ø© Ø§Ù„Ø³ÙŠÙ†ÙŠØ©">
                        <div class="upload-content">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <h3 data-i18n="upload_label_title">Ø§Ø³Ø­Ø¨ Ø§Ù„ØµÙˆØ±Ø© Ù‡Ù†Ø§ Ø£Ùˆ Ø§Ù†Ù‚Ø± Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±</h3>
                            <p data-i18n="upload_label_desc">PNG, JPG (Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰: 50MB)</p>
                        </div>
                    </div>
                    <button class="btn btn-secondary" style="margin-top: 20px; width: 100%;" onclick="loadSampleImage()">
                        <i class="fas fa-image"></i>
                        <span data-i18n="try_sample_image">Ø¬Ø±Ø¨ ØªØ­Ù„ÙŠÙ„ ØµÙˆØ±Ø© Ù…Ø«Ø§Ù„</span>
                    </button>
                </div>

                <!-- Enhanced Loading State -->
                <div id="loading-state" class="loading-state" style="display: none;" role="status" aria-live="polite">
                    <div class="ai-scanner" aria-hidden="true"></div>
                    <p data-i18n="analyzing_text">Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ...</p>
                    <div class="progress-container" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar" id="analysis-progress-bar"></div>
                    </div>
                    <p class="progress-text" id="analysis-progress-text">0%</p>
                </div>

                <!-- Result with Tooltip -->
                <div id="analysis-result" class="result-container" style="display: none;" role="region" aria-label="Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ù„ÙŠÙ„">
                    <div class="result-card">
                        <h3 data-i18n="result_analysis_label">Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„:</h3>
                        <div id="result-card-content">
                            <div class="result-item">
                                <label>Ø§Ù„Ù†ØªÙŠØ¬Ø©:</label>
                                <p class="result-value result-negative">
                                    ğŸŸ¢ 
                                    <span class="tooltip-wrapper" tabindex="0">Ø³Ù„ÙŠÙ…
                                        <span class="tooltip" data-i18n="tooltip_normal">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù„Ø§Ù…Ø§Øª ÙˆØ§Ø¶Ø­Ø© Ù„Ù„Ø§Ù„ØªÙ‡Ø§Ø¨ Ø§Ù„Ø±Ø¦ÙˆÙŠ ÙÙŠ Ø§Ù„ØµÙˆØ±Ø©.</span>
                                    </span>
                                </p>
                            </div>
                            <div class="result-item">
                                <label>Ø¯Ø±Ø¬Ø© Ø§Ù„Ø«Ù‚Ø©:</label>
                                <div class="confidence-bar">
                                    <div class="confidence-fill" style="width: 95%"></div>
                                </div>
                                <p class="confidence-text">95.0%</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p data-i18n="footer_copyright">&copy; 2025 PneumoDetect - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
            <p data-i18n="footer_privacy">Ù†Ø¸Ø§Ù… Ø¢Ù…Ù† ÙˆÙ…Ø´ÙØ± Ù„Ø­Ù…Ø§ÙŠØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±Ø¶Ù‰ ÙˆÙÙ‚Ø§Ù‹ Ù„Ø£Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ±.</p>
        </div>
    </footer>

    <script>
        // Comprehensive Translations
        const translations = {
            ar: {
                page_title: "PneumoDetect - ÙƒØ´Ù Ø°ÙƒÙŠ Ù„Ù„Ø§Ù„ØªÙ‡Ø§Ø¨ Ø§Ù„Ø±Ø¦ÙˆÙŠ",
                nav_home: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©", nav_analysis: "Ø§Ù„ØªØ­Ù„ÙŠÙ„", nav_login: "Ø¯Ø®ÙˆÙ„",
                home_title: "ğŸ¯ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ PneumoDetect",
                home_description: "Ù…Ù†ØµØ© Ù…ØªÙ‚Ø¯Ù…Ø© Ù„ØªØ­Ù„ÙŠÙ„ ØµÙˆØ± Ø§Ù„Ø£Ø´Ø¹Ø© Ø§Ù„Ø³ÙŠÙ†ÙŠØ© Ù„Ù„ØµØ¯Ø± Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¨Ø¯Ù‚Ø© ÙˆÙ…ÙˆØ«ÙˆÙ‚ÙŠØ© Ø¹Ø§Ù„ÙŠØ©.",
                home_cta_analyze: "Ø§Ø¨Ø¯Ø£ ØªØ­Ù„ÙŠÙ„Ø§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹", home_cta_register: "Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯",
                features_title: "Ù„Ù…Ø§Ø°Ø§ ØªØ®ØªØ§Ø± PneumoDetectØŸ",
                home_card1_title: "âš¡ ØªØ­Ù„ÙŠÙ„ ÙÙˆØ±ÙŠ", home_card1_desc: "Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬ ØªØ­Ù„ÙŠÙ„ ØµÙˆØ± Ø§Ù„Ø£Ø´Ø¹Ø© Ø§Ù„Ø³ÙŠÙ†ÙŠØ© ÙÙŠ Ø«ÙˆØ§Ù†Ù Ù…Ø¹Ø¯ÙˆØ¯Ø© Ø¨Ø¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©.",
                home_card2_title: "âœ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ù…ØªØ®ØµØµØ©", home_card2_desc: "ÙŠÙ…ÙƒÙ† Ù„Ù„Ø£Ø·Ø¨Ø§Ø¡ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØ¥Ø¶Ø§ÙØ© Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙ‡Ù… Ø§Ù„Ø·Ø¨ÙŠØ© Ù„Ø¶Ù…Ø§Ù† ØªØ´Ø®ÙŠØµ Ø¯Ù‚ÙŠÙ‚.",
                home_card3_title: "ğŸ”’ Ø£Ù…Ø§Ù† Ø¹Ø§Ù„ÙŠ", home_card3_desc: "Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø·Ø¨ÙŠØ© Ù…Ø­Ù…ÙŠØ© Ø¨Ø£Ø¹Ù„Ù‰ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„ØªØ´ÙÙŠØ±.",
                analysis_title: "ğŸ”¬ ØªØ­Ù„ÙŠÙ„ ØµÙˆØ±Ø© Ø§Ù„Ø£Ø´Ø¹Ø© Ø§Ù„Ø³ÙŠÙ†ÙŠØ©",
                analysis_description: "Ø§Ø®ØªØ± ØµÙˆØ±Ø© Ø¨ØµÙŠØºØ© JPG Ø£Ùˆ PNG Ù„Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙÙˆØ±ÙŠ.",
                upload_label_title: "Ø§Ø³Ø­Ø¨ Ø§Ù„ØµÙˆØ±Ø© Ù‡Ù†Ø§ Ø£Ùˆ Ø§Ù†Ù‚Ø± Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±", upload_label_desc: "PNG, JPG (Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰: 50MB)",
                try_sample_image: "Ø¬Ø±Ø¨ ØªØ­Ù„ÙŠÙ„ ØµÙˆØ±Ø© Ù…Ø«Ø§Ù„",
                analyzing_text: "Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ...",
                result_analysis_label: "Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„:",
                tooltip_normal: "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù„Ø§Ù…Ø§Øª ÙˆØ§Ø¶Ø­Ø© Ù„Ù„Ø§Ù„ØªÙ‡Ø§Ø¨ Ø§Ù„Ø±Ø¦ÙˆÙŠ ÙÙŠ Ø§Ù„ØµÙˆØ±Ø©.",
                footer_copyright: "&copy; 2025 PneumoDetect - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©",
                footer_privacy: "Ù†Ø¸Ø§Ù… Ø¢Ù…Ù† ÙˆÙ…Ø´ÙØ± Ù„Ø­Ù…Ø§ÙŠØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±Ø¶Ù‰ ÙˆÙÙ‚Ø§Ù‹ Ù„Ø£Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ±.",
                error_invalid_file: "Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© (PNG, JPG).",
                error_file_too_large: "Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù ÙƒØ¨ÙŠØ± Ø¬Ø¯Ù‹Ø§. Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù‡Ùˆ 50MB.",
                error_analysis_failed: "ÙØ´Ù„ Ø§Ù„ØªØ­Ù„ÙŠÙ„ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰."
            },
            en: {
                page_title: "PneumoDetect - Intelligent Pneumonia Detection",
                nav_home: "Home", nav_analysis: "Analysis", nav_login: "Login",
                home_title: "ğŸ¯ Welcome to PneumoDetect",
                home_description: "An advanced platform for analyzing chest X-ray images using artificial intelligence with high accuracy and reliability.",
                home_cta_analyze: "Start a new analysis", home_cta_register: "Create a new account",
                features_title: "Why choose PneumoDetect?",
                home_card1_title: "âš¡ Instant Analysis", home_card1_desc: "Get X-ray image analysis results in seconds with high accuracy.",
                home_card2_title: "âœ… Specialized Review", home_card2_desc: "Doctors can review and add their medical notes to ensure accurate diagnosis.",
                home_card3_title: "ğŸ”’ High Security", home_card3_desc: "Your medical data is protected with highest standards of security and encryption.",
                analysis_title: "ğŸ”¬ X-ray Image Analysis",
                analysis_description: "Select a JPG or PNG image to start instant analysis.",
                upload_label_title: "Drag image here or click to select", upload_label_desc: "PNG, JPG (Max: 50MB)",
                try_sample_image: "Try analyzing a sample image",
                analyzing_text: "Analyzing image with AI...",
                result_analysis_label: "Analysis Result:",
                tooltip_normal: "No clear signs of pneumonia are visible in image.",
                footer_copyright: "&copy; 2025 PneumoDetect - All Rights Reserved",
                footer_privacy: "A secure and encrypted system to protect patient data according to highest standards.",
                error_invalid_file: "Invalid file type. Please choose an image (PNG, JPG).",
                error_file_too_large: "File is too large. The maximum size is 50MB.",
                error_analysis_failed: "Analysis failed, please try again."
            }
        };

        const appState = { 
            currentLang: 'ar',
            isDarkMode: false,
            maxNotifications: 3
        };

        document.addEventListener('DOMContentLoaded', () => {
            const savedLang = localStorage.getItem('pneumoDetectLang') || 'ar';
            const savedTheme = localStorage.getItem('pneumoDetectTheme') || 'light';
            
            setLanguage(savedLang);
            setTheme(savedTheme);
            setupEventListeners();
            
            // Lazy load hero background
            lazyLoadBackground();
        });

        function setLanguage(lang) {
            appState.currentLang = lang;
            localStorage.setItem('pneumoDetectLang', lang);
            document.documentElement.lang = lang;
            document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
            
            document.querySelectorAll('.lang-toggle button').forEach(btn => {
                btn.classList.toggle('active', btn.getAttribute('data-lang') === lang);
                btn.setAttribute('aria-pressed', btn.getAttribute('data-lang') === lang ? 'true' : 'false');
            });
            
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[lang] && translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });
        }

        function setTheme(theme) {
            appState.isDarkMode = theme === 'dark';
            localStorage.setItem('pneumoDetectTheme', theme);
            document.documentElement.setAttribute('data-theme', theme);
            
            const themeIcon = document.getElementById('theme-icon');
            themeIcon.className = appState.isDarkMode ? 'fas fa-sun' : 'fas fa-moon';
            
            const themeToggle = document.getElementById('theme-toggle');
            themeToggle.setAttribute('aria-label', appState.isDarkMode ? 'ØªØ¨Ø¯ÙŠÙ„ Ø¥Ù„Ù‰ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ' : 'ØªØ¨Ø¯ÙŠÙ„ Ø¥Ù„Ù‰ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ');
        }

        function toggleTheme() {
            setTheme(appState.isDarkMode ? 'light' : 'dark');
        }

        function showNotification(message, type = 'info', title = '') {
            const container = document.getElementById('notification-container');
            
            // Limit notifications
            if (container.children.length >= appState.maxNotifications) {
                container.removeChild(container.firstChild);
            }
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            const icon = type === 'error' ? 'fa-exclamation-circle' : (type === 'success' ? 'fa-check-circle' : 'fa-info-circle');
            
            notification.innerHTML = `
                <i class="fas ${icon}"></i>
                <div class="notification-content">
                    ${title ? `<div class="notification-title">${title}</div>` : ''}
                    <div class="notification-message">${message}</div>
                </div>
                <i class="fas fa-times notification-close" onclick="this.parentElement.remove()"></i>
            `;
            
            container.appendChild(notification);
            setTimeout(() => notification.remove(), 5000);
        }

        function setupEventListeners() {
            const uploadArea = document.getElementById('file-upload-area');
            const imageInput = document.getElementById('imageInput');
            const themeToggle = document.getElementById('theme-toggle');

            uploadArea.addEventListener('click', () => imageInput.click());
            uploadArea.addEventListener('keypress', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); imageInput.click(); } });
            
            uploadArea.addEventListener('dragover', (e) => { e.preventDefault(); uploadArea.classList.add('drag-over'); });
            uploadArea.addEventListener('dragleave', () => uploadArea.classList.remove('drag-over'));
            uploadArea.addEventListener('drop', (e) => { e.preventDefault(); uploadArea.classList.remove('drag-over'); handleFile(e.dataTransfer.files[0]); });
            
            imageInput.addEventListener('change', (e) => { if (e.target.files.length) handleFile(e.target.files[0]); });
            themeToggle.addEventListener('click', toggleTheme);
        }

        function handleFile(file) {
            if (!file) return;
            const maxSize = 50 * 1024 * 1024;
            const allowedTypes = ['image/jpeg', 'image/png'];

            if (!allowedTypes.includes(file.type)) {
                showNotification(t('error_invalid_file'), 'error', t('error_title'));
                return;
            }
            if (file.size > maxSize) {
                showNotification(t('error_file_too_large'), 'error', t('error_title'));
                return;
            }
            
            showNotification(`ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù„Ù: ${file.name}`, 'success');
            startAnalysis(file);
        }

        function loadSampleImage() {
            showNotification('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø© Ø§Ù„Ù…Ø«Ø§Ù„...', 'info');
            // Create a proper image blob using a data URL
            const canvas = document.createElement('canvas');
            canvas.width = 256;
            canvas.height = 256;
            const ctx = canvas.getContext('2d');
            
            // Draw a simple medical-like image (grayscale pattern)
            ctx.fillStyle = '#a0a0a0';
            ctx.fillRect(0, 0, 256, 256);
            
            // Add some pattern to simulate X-ray
            ctx.fillStyle = '#d0d0d0';
            ctx.beginPath();
            ctx.ellipse(128, 128, 80, 100, 0, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = '#808080';
            ctx.beginPath();
            ctx.ellipse(128, 128, 60, 80, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // Convert canvas to blob and create file
            canvas.toBlob((blob) => {
                const sampleFile = new File([blob], 'sample_xray.jpg', { type: 'image/jpeg' });
                startAnalysis(sampleFile);
            }, 'image/jpeg', 0.8);
        }

        async function startAnalysis(file) {
            const loadingState = document.getElementById('loading-state');
            const resultDiv = document.getElementById('analysis-result');
            const progressBar = document.getElementById('analysis-progress-bar');
            const progressText = document.getElementById('analysis-progress-text');

            loadingState.style.display = 'block';
            resultDiv.style.display = 'none';

            try {
                // Show progress animation
                progressBar.style.width = '10%';
                progressText.textContent = '10%';
                loadingState.setAttribute('aria-valuenow', 10);

                // Prepare form data with the file
                const formData = new FormData();
                formData.append('file', file);

                // Make real API call to /api/analyze
                showNotification('Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø°ÙƒÙŠ...', 'info');
                progressBar.style.width = '30%';
                progressText.textContent = '30%';
                loadingState.setAttribute('aria-valuenow', 30);

                const response = await fetch('/api/analyze', {
                    method: 'POST',
                    body: formData,
                    credentials: 'include'
                });

                progressBar.style.width = '70%';
                progressText.textContent = '70%';
                loadingState.setAttribute('aria-valuenow', 70);

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.message || 'ÙØ´Ù„ Ø§Ù„ØªØ­Ù„ÙŠÙ„');
                }

                const result = await response.json();
                
                progressBar.style.width = '100%';
                progressText.textContent = '100%';
                loadingState.setAttribute('aria-valuenow', 100);

                // Display results
                setTimeout(() => {
                    displayAnalysisResult(result.data);
                    loadingState.style.display = 'none';
                    resultDiv.style.display = 'block';
                    resultDiv.scrollIntoView({ behavior: 'smooth' });
                    showNotification('ØªÙ… Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                }, 500);

            } catch (error) {
                loadingState.style.display = 'none';
                showNotification('Ø®Ø·Ø£: ' + error.message, 'error', t('error_title'));
                console.error('Analysis error:', error);
            }
        }

        function displayAnalysisResult(data) {
            const resultCardContent = document.getElementById('result-card-content');
            if (!resultCardContent) return;

            const resultBadge = data.result === 'PNEUMONIA' ? 
                '<p style="color: #dc3545; font-weight: bold;">ğŸ”´ Ø¥ÙŠØ¬Ø§Ø¨ÙŠ (Ø§Ù„ØªÙ‡Ø§Ø¨ Ø±Ø¦ÙˆÙŠ)</p>' :
                '<p style="color: #28a745; font-weight: bold;">ğŸŸ¢ Ø³Ù„Ø¨ÙŠ (Ø¨Ø¯ÙˆÙ† Ø§Ù„ØªÙ‡Ø§Ø¨)</p>';

            resultCardContent.innerHTML = `
                <div class="result-item">
                    <label>Ø§Ù„Ù†ØªÙŠØ¬Ø©:</label>
                    ${resultBadge}
                </div>
                <div class="result-item">
                    <label>Ø¯Ø±Ø¬Ø© Ø§Ù„Ø«Ù‚Ø©:</label>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: ${data.confidence}%"></div>
                    </div>
                    <p class="confidence-text">${data.confidence.toFixed(1)}%</p>
                </div>
                <div class="result-item">
                    <label>Ø§Ù„Ø´Ø±Ø­:</label>
                    <p>${data.explanation || 'ØªÙ… ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ø¨ÙˆØ§Ø³Ø·Ø© Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…'}</p>
                </div>
                ${data.saliency_url ? `
                <div class="result-item">
                    <label>Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø¥Ø¨Ø±Ø§Ø² (Saliency Map):</label>
                    <img src="${data.saliency_url}" alt="Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø¥Ø¨Ø±Ø§Ø²" style="max-width: 100%; border-radius: 8px; margin-top: 10px;">
                </div>
                ` : ''}
            `;
        }
        
        function t(key) { return translations[appState.currentLang][key] || key; }

        // Lazy loading for background images
        function lazyLoadBackground() {
            const heroSection = document.getElementById('home-section');
            const bgUrl = heroSection.getAttribute('data-bg');
            
            if (bgUrl) {
                const img = new Image();
                img.onload = function() {
                    heroSection.style.backgroundImage = `url(${bgUrl})`;
                    heroSection.classList.add('lazy-bg');
                };
                img.src = bgUrl;
            }
        }
    </script>
    <!-- Core JavaScript Module -->
    <script src="{{ url_for('static', filename='core.js') }}"></script>
    <script>
        // Initialize PneumoApp
        document.addEventListener('DOMContentLoaded', () => {
            if (window.PneumoApp) {
                PneumoApp.init();
                PneumoApp.Theme.init();
            }
        });
    </script>
</body>
</html>